<html xmlns:th="http://www.thymeleaf.org">

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://syntagmatic.github.io/parallel-coordinates/d3.parcoords.js"></script>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"
        integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="https://syntagmatic.github.io/parallel-coordinates/d3.parcoords.css">

<h1 align="center" th:inline="text">Pipeline [[${algo}]] ([[${pipe}]])</h1>
<div id="example" class="parcoords" style="width:5000px;height:800px;"></div>
<script th:inline="javascript">

    processData = function (data, status, jqXHR) {
        dimensions = {};
        for (var property in data[0]) {
            if (data[0].hasOwnProperty(property)) {
                if(property == "name") {
                    dimensions["name"] = {type : "number"};
                }
                else{
                    scale = d3.scale.linear().domain([0,1]).range([0,500]);
                    dimensions[property] = {ticks: 11,
                        tickValues: [1.0,0.8,0.6,0.4,0.2 ,0, -0.2,-0.4,-0.6,-0.8, -1.0],
                        type : "number", yscale: scale};
                }
            }
        }

        var pc = d3.parcoords()("#example")
            .data(data)
            .dimensions(dimensions)

            //.composite("darken")
            //.updateAxes()
            //.createAxes()
            //.brushMode("1D-axes")

            .interactive()
            .render()
            .reorderable()
        ;
    };
    $.getJSON("/pipe/" + [[${pipe}]] + "/graph/" + [[${algo}]], processData);


</script>

</html>
